{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Santa Dashboard</title>

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <!-- FontAwesome Icons -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      /* General Body Styling */
      body {
        background: linear-gradient(#4d9f4d, #ffcccb); /* Gradient background */
        color: #333;
        font-family: Arial, sans-serif;
        height: 100vh;
      }

      /* Navbar Styles */
      .navbar {
        background-color: #d32f2f; /* Santa red */
        padding: 1rem 1.5rem;
      }

      .navbar-brand {
        font-family: "Montserrat", sans-serif; /* Clean, modern font */
        font-weight: bold; /* Make it bold */
        font-size: 1.7rem; /* Keep the font size slightly large */
        color: #fff; /* Ensure it contrasts well against the red background */
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6); /* Add a subtle shadow for depth */
      }

      .navbar-nav .nav-link {
        color: white;
        font-size: 1.1rem;
        padding: 10px 15px;
        transition: color 0.3s ease;
      }

      .navbar-nav .nav-link:hover {
        color: #f7a700; /* Yellow on hover */
      }

      /* Content Styles */
      .content {
        padding: 40px;
        background: rgba(
          255,
          255,
          255,
          0.1
        ); /* Semi-transparent white background */
        backdrop-filter: blur(
          10px
        ); /* Blur effect to create the frosted glass look */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Soft shadow to enhance the effect */
        border-radius: 8px;
        margin-top: 20px;
        margin-bottom: 20px;
        color: #fff; /* White text for better contrast */
      }

      .content h2,
      .content h3 {
        text-align: center;
        margin-bottom: 20px;
        font-weight: bold;
        color: #d32f2f; /* Santa red */
        text-shadow: white;
      }

      .content h3 {
        font-size: 1.5rem;
      }

      /* Card Styles */
      .card {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        margin: 10px;
        transition: transform 0.3s ease;
      }

      .card-body {
        padding: 20px;
        text-align: center;
        position: relative;
      }

      .card .btn {
        font-size: 0.9rem;
        padding: 6px 15px;
      }

      .card .card-title {
        font-size: 1.2rem;
        color: #d32f2f; /* Santa red */
      }

      .card .card-text {
        color: #777;
      }

      .card:hover {
        transform: scale(1.05);
      }

      .card i {
        font-size: 2rem;
        color: #ffeb3b;
      }

      /* Buttons */
      .btn-info,
      .btn-primary {
        font-size: 1.1rem;
        padding: 10px 20px;
        background-color: #d32f2f;
        border: none;
        color: white;
        border-radius: 25px;
        transition: background-color 0.3s ease;
      }

      .btn-info:hover,
      .btn-primary:hover {
        background-color: #ffeb3b; /* Yellow on hover */
        color: #d32f2f;
      }

      /* System Messages Section */
      .message {
        border-left: 6px solid #ffcc00;
        transition: transform 0.3s ease, background-color 0.3s ease;
        padding: 15px;
        margin-bottom: 15px;
        background-color: #333; /* Changed to black */
        color: #fff; /* Text color changed to white for contrast */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        border-radius: 6px;
      }

      .message:hover {
        transform: translateX(5px);
        background-color: #444; /* Slightly lighter black on hover */
      }

      .no-messages {
        color: #fff; /* White text for better visibility */
        text-align: center;
        background-color: #333; /* Black background */
        padding: 15px;
        border-radius: 6px;
      }

      .hidden {
        display: none;
      }

      /* Responsive Styles */
      @media (max-width: 768px) {
        .content {
          padding: 20px;
        }

        .navbar-brand {
          font-size: 1.5rem;
        }

        .navbar-nav .nav-link {
          font-size: 1rem;
        }

        .btn-info {
          font-size: 1rem;
          padding: 8px 16px;
        }

        .card-body .card-title {
          font-size: 1rem;
        }

        .card .btn {
          font-size: 0.85rem;
        }
      }
      /* Snowflake animation */
      @keyframes snow {
        0% {
          transform: translateY(-100px);
        }
        100% {
          transform: translateY(100vh);
        }
      }

      .snowflake {
        position: absolute;
        top: -10px;
        left: 50%;
        font-size: 1.5rem;
        color: white;
        opacity: 0.7;
        animation: snow 10s linear infinite;
      }

      .snowflake:nth-child(odd) {
        animation-duration: 15s;
      }

      .snowflake:nth-child(even) {
        animation-duration: 20s;
      }

      .snowflake:nth-child(3n) {
        animation-duration: 25s;
      }
    </style>
  </head>
  <body>
    <div class="snowflake" style="left: 10%; animation-delay: 0s">‚ùÑÔ∏è</div>
    <div class="snowflake" style="left: 20%; animation-delay: 2s">‚ùÑÔ∏è</div>
    <div class="snowflake" style="left: 30%; animation-delay: 4s">‚ùÑÔ∏è</div>
    <div class="snowflake" style="left: 40%; animation-delay: 6s">‚ùÑÔ∏è</div>
    <div class="snowflake" style="left: 50%; animation-delay: 8s">‚ùÑÔ∏è</div>
    <div class="snowflake" style="left: 60%; animation-delay: 10s">‚ùÑÔ∏è</div>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">üéÖ Santa's Dashboard</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="{% url 'home' %}">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="{% url 'admin_dashboard' %}"
                >Dashboard</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'admin_logout' %}">Logout</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="content">
      <!-- Users Section -->
      <h2>List of All Users</h2>

      {% if users %}
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3">
        {% for user in users %}
        <div class="col mb-4">
          <div class="card border-light shadow-sm">
            <div class="card-body">
              <!-- User Icon -->
              <div class="d-flex justify-content-center mb-3">
                <i class="fas fa-user-elf fa-3x text-warning"></i>
                <!-- Icon with size and color -->
              </div>
              <h5 class="card-title text-center text-danger">
                {{ user.username }}
              </h5>
              <p class="card-text text-center text-muted">{{ user.email }}</p>

              <!-- Buttons with icons -->
              <div class="d-flex justify-content-center gap-3">
                <a
                  href="{% url 'delete_user' user.id %}"
                  class="btn btn-danger btn-sm"
                  onclick="return confirm('Are you sure you want to delete this user?');"
                >
                  <i class="fas fa-trash-alt me-2"></i> Remove User
                </a>
                <a
                  href="{% url 'send_message' user.id %}"
                  class="btn btn-primary btn-sm"
                >
                  <i class="fas fa-envelope me-2"></i> Send A Message
                </a>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <p class="no-messages">No elves available.</p>
      {% endif %}

      <!-- Mailbox Section -->
      <div class="text-center my-4">
        <a href="{% url 'view_user_messages' user.id %}" class="btn btn-info">
          <i class="fas fa-envelope"></i> Check Santa's Mailbox
        </a>
      </div>

      <!-- Toggle Button for System Messages -->
      <div class="text-center my-4">
        <button id="toggleMessagesBtn" class="btn btn-warning">
          <i class="fas fa-bell"></i> Show/Hide Santa's Messages
        </button>
      </div>

      <!-- System Messages Section (Initially Hidden) -->
      <div id="systemMessages" class="hidden">
        <h3 class="mt-5">Santa's Messages Log</h3>
        {% if messages %}
        <ul class="list-unstyled">
          {% for message in messages %}
          <li class="message">
            <p class="mb-0">{{ message }}</p>
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p class="no-messages">No messages available.</p>
        {% endif %}
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // JavaScript to toggle the visibility of system messages
      document
        .getElementById("toggleMessagesBtn")
        .addEventListener("click", function () {
          var messagesSection = document.getElementById("systemMessages");
          messagesSection.classList.toggle("hidden");
        });
    </script>
  </body>
</html>
